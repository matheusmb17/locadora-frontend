(function(){var e={5358:function(e,t,a){var s={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":4858,"./fo.js":4858,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":2539,"./ur.js":2539,"./uz":7609,"./uz-latn":2475,"./uz-latn.js":2475,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=o,e.exports=r,r.id=5358},9225:function(e,t,a){"use strict";var s=a(5471),r=a(5668),o=function(){var e=this,t=e._self._c;return t(r.A,[t("LayoutPage"),t("router-view")],1)},i=[],l=a(301),n=a(2696),c=a(3740),d=a(6930),u=a(8160),h=a(8983),m=a(7296),p=a(9136),g=a(2134),f=a(5322),y=a(1249),b=a(1034),v=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return"login"!==e.$route.name&&"register"!==e.$route.name?t("nav",[t(y.A,{staticClass:"sidebar",attrs:{temporary:"",absolute:"",dark:""},model:{value:a.isDrawerOpen,callback:function(e){a.isDrawerOpen=e},expression:"isDrawerOpen"}},[t(h.A,[t(m.A,[t(u.A,{staticClass:"header_side",attrs:{flex:""}},[t(n.A,{staticClass:"menu_icon",attrs:{large:""},on:{click:function(e){a.isDrawerOpen=!a.isDrawerOpen}}}),t("div",{staticClass:"d-flex align-center white--text",staticStyle:{"font-size":"22px"}},[t(d.A,[e._v("mdi-bookshelf")]),e._v("WDA Livraria")],1),t("div")],1)],1),e._l(e.links,function(a){return t(m.A,{key:a.text,attrs:{flat:"",router:"",to:a.route}},[t(p.A,[t(d.A,[e._v(e._s(a.icon))])],1),t(g.UZ,[e._v(e._s(a.text))])],1)})],2)],1),t(l.A,{attrs:{app:"",dark:""}},[t(n.A,{staticClass:"menu_icon",on:{click:function(e){a.isDrawerOpen=!a.isDrawerOpen}}}),t("div",{staticClass:"d-flex align-center"},[t(c.A,{attrs:{href:"/"}},[t(d.A,[e._v("mdi-bookshelf")]),e._v(" WDA LIVRARIA")],1)],1),t(b.A),t(c.A,{on:{click:e.logout}},[t(d.A,[e._v("mdi-logout")]),e._v(" Sair")],1)],1),t(f.A,[e._t("default")],2)],1):e._e()},D=[],x=a(4335);const k=x.A.create({baseURL:"https://locadora-backend-rxw6.onrender.com/api/"});k.interceptors.request.use(e=>{const t=j.getToken();return t&&(e.headers.Authorization=`Bearer ${t}`),e}),k.interceptors.response.use(e=>e,e=>("ERR_NETWORK"==e.status&&(j.logout(),window.location.href="/login"),Promise.reject(e)));var A=k,j={list:e=>(e||(e={}),A.get("auth",{params:{PageNumber:e.PageNumber,PageSize:e.PageSize,OrderByProperty:e.OrderByProperty,OrderByDesc:e.OrderByDesc}})),register:e=>A.post("auth/register",e),login:async e=>{var t=await A.post("auth/login",e);return localStorage.setItem("user-token",t.data.message[0]),t},logout:()=>{localStorage.removeItem("user-token")},update:e=>A.put(`auth/${e.id}`,e),delete:e=>A.delete(`auth/${e.id}`,{user:e}),getToken(){return localStorage.getItem("user-token")},isAuthenticated(){return!!localStorage.getItem("user-token")}};const C={data(){return{links:[{icon:"mdi-widgets",text:"Dashboard",route:"/"},{icon:"mdi-account",text:"Usuário",route:"/usuario"},{icon:"mdi-book",text:"Livro",route:"/livro"},{icon:"mdi-pencil",text:"Editora",route:"/editora"},{icon:"mdi-book-account",text:"Aluguel",route:"/aluguel"}]}},methods:{logout(){j.logout(),location.reload()}}};var w=Object.assign(C,{__name:"LayoutPage",setup(e){const t=(0,s.KR)(!1);return{__sfc:!0,isDrawerOpen:t}}}),P=w,B=a(1656),_=(0,B.A)(P,v,D,!1,null,null,null),O=_.exports,M={name:"App",components:{LayoutPage:O},computed:{}},S=M,E=(0,B.A)(S,o,i,!1,null,null,null),T=E.exports,z=a(173),R=a(1484),I=a(2938),N=a(8779),$=a(6921),q=function(){var e=this,t=e._self._c;return t(N.A,{staticClass:"pa-6",attrs:{fluid:""}},[t(u.A,{staticClass:"cardsLayout",attrs:{row:"","justify-content-center":""}},e._l(e.cards,function(a){return t($.A,{key:a.id,staticClass:"cardsFlex",attrs:{sm6:"",xs12:"",md6:"",lg4:""}},[t(R.A,{staticClass:"ma-2",attrs:{dark:"",elevation:"4",loading:e.loadingCard}},[t(I.ri,[t(d.A,{attrs:{left:"",large:""}},[e._v(e._s(a.icon))]),e._v(" "+e._s(a.title)+" ")],1),t(I.OQ,{staticClass:"text-subtitle-1"},[e._v(" "+e._s(a.value)+" ")])],1)],1)}),1),t($.A,{staticClass:"mt-6 chartsGroup",attrs:{row:"","justify-space-around":"",wrap:""}},[t("LineChart"),t("PieChart")],1)],1)},L=[],U=(a(3725),a(9471),a(1554)),V=function(){var e=this,t=e._self._c;return t(R.A,{staticClass:"col-6 charts",attrs:{elevation:"4",outlined:""}},[0===e.rentals.length?t(U.A,{staticClass:"center-progress mt-12",attrs:{color:"blue lighten-3",indeterminate:"",size:150}}):e._e(),t("canvas",{ref:"myChart",staticClass:"chartBar",style:{display:e.mostrented.length>0?"block":"none"},attrs:{width:"450",height:"200"}})],1)},F=[],Q=(a(9838),a(1339),a(2477)),Y=a.n(Q),W={list:e=>(e||(e={}),A.get("rentals",{params:{PageNumber:e.PageNumber,PageSize:e.PageSize,OrderByProperty:e.OrderByProperty,OrderByDesc:e.OrderByDesc,FilterValue:e.FilterValue}})),create:e=>A.post("rentals",e),update:e=>A.put(`rentals/${e.id}`,e),delete:e=>A.delete(`rentals/${e.id}`,{rental:e})},K={data(){return{rentals:[],total:0,mostrented:[],loadingChart:!0}},mounted(){this.getRentals()},methods:{async getRentals(){try{const e=await W.list();if(this.total=e.data.totalRegisters,this.total>0){const e=await W.list({PageSize:this.total});this.rentals=e.data}const t={};this.rentals.data.forEach(e=>{const a=e.book.name;t[a]?t[a]++:t[a]=1}),this.mostrented=Object.keys(t).sort((e,a)=>t[a]-t[e]).map(e=>({bookname:e,quantity:t[e]}))}catch(e){console.error(e)}finally{this.loadingChart=!1,this.updateBarChart()}},truncateLabel(e){const t=13;return e.length>t?e.substring(0,t)+"...":e},async updateBarChart(){const e=this.$refs.myChart.getContext("2d"),t=this.mostrented.slice(0,3);var a=t.map(e=>this.truncateLabel(e.bookname)),s=t.map(e=>this.truncateLabel(e.quantity));new(Y())(e,{type:"bar",data:{labels:a,datasets:[{label:"",data:s,backgroundColor:["rgb(168, 71, 82)","rgb(51, 126, 204)","rgb(255, 204, 0)","rgb(51, 204, 204)","rgb(123, 104, 238)"],borderWidth:0}]},options:{scales:{yAxes:[{ticks:{display:!1},gridLines:{display:!1}}],xAxes:[{gridLines:{display:!1}}]},legend:{display:!1},title:{display:!0,text:"Livros mais alugados",fontSize:25,fontFamily:"Roboto"},maintainAspectRatio:!1}})}}},Z=K,G=(0,B.A)(Z,V,F,!1,null,null,null),H=G.exports,J=function(){var e=this,t=e._self._c;return t(R.A,{staticClass:"col-6 charts",attrs:{elevation:"4"}},[0===e.rentals.length?t(U.A,{staticClass:"center-progress mt-12",attrs:{color:"blue lighten-3",indeterminate:"",size:150}}):e._e(),t("canvas",{ref:"myPieChart",staticClass:"chartPie",style:{display:e.rentals.length>0?"block":"none"},attrs:{width:"450",height:"200"}})],1)},X=[],ee={data(){return{rentals:[],total:0,registers:[],loadingChart:!0}},mounted(){this.listStatus()},methods:{async listStatus(){try{const e=await W.list();if(this.total=e.data.totalRegisters,this.total>0){const e=await W.list({PageSize:this.total});this.registers=e.data}const t={"No prazo":0,Atrasado:0,Pendente:0};this.registers.data.forEach(e=>{const a=e.status;"Atrasado"===a?t["Atrasado"]++:"No prazo"===a?t["No prazo"]++:"Pendente"===a&&t["Pendente"]++});const a=Object.entries(t);this.rentals=a}catch(e){console.error("Erro ao buscar dados:",e)}finally{this.loadingChart=!1,this.updatePieChart()}},updatePieChart(){const e=this.rentals.map(e=>e[0]),t=this.rentals.map(e=>e[1]),a=this.$refs.myPieChart.getContext("2d");new(Y())(a,{type:"pie",data:{labels:e,datasets:[{data:t,fill:!1,backgroundColor:["rgb(2, 149, 90)","rgb(168, 45, 54)","rgb(235, 204, 0)"],borderColor:["rgb(2, 149, 90)","rgb(168, 45, 54)","rgb(235, 204, 0)"],borderWidth:1}]},options:{indexAxis:"x",title:{display:!0,text:"Status de Aluguéis",fontSize:25,fontFamily:"Roboto"},maintainAspectRatio:!1}})}}},te=ee,ae=(0,B.A)(te,J,X,!1,null,null,null),se=ae.exports,re={list:e=>(e||(e={}),A.get("users",{params:{PageNumber:e.PageNumber,PageSize:e.PageSize,OrderByProperty:e.OrderByProperty,OrderByDesc:e.OrderByDesc,FilterValue:e.FilterValue}})),listSelect:()=>A.get("users/getsummary"),create:e=>A.post("users",e),update:e=>A.put(`users/${e.id}`,e),delete:e=>A.delete(`users/${e.id}`,{user:e})},oe={list:e=>(e||(e={}),A.get("books",{params:{PageNumber:e.PageNumber,PageSize:e.PageSize,OrderByProperty:e.OrderByProperty,OrderByDesc:e.OrderByDesc,FilterValue:e.FilterValue}})),listSelect:()=>A.get("books/getsummary"),create:e=>A.post("books",e),update:e=>A.put(`books/${e.id}`,e),delete:e=>A.delete(`books/${e.id}`,{book:e})},ie={list:e=>(e||(e={}),A.get("publishers",{params:{PageNumber:e.PageNumber,PageSize:e.PageSize,OrderByProperty:e.OrderByProperty,OrderByDesc:e.OrderByDesc,FilterValue:e.FilterValue}})),listSelect:()=>A.get("publishers/getsummary"),create:e=>A.post("publishers",e),update:e=>A.put(`publishers/${e.id}`,e),delete:e=>A.delete(`publishers/${e.id}`,{publisher:e})},le={data:()=>({cards:[{id:0,title:"Último livro alugado",icon:"mdi-book-sync",value:""},{id:1,title:"Total de Aluguéis",icon:"mdi-book-account",value:""},{id:2,title:"Livros disponíveis",icon:"mdi-book-check",value:""},{id:3,title:"Livros Cadastrados",icon:"mdi-book-open-variant",value:""},{id:4,title:"Usuários cadastrados",icon:"mdi-account",value:""},{id:5,title:"Editoras cadastradas",icon:"mdi-pencil",value:""}],loadingCard:!0,books:[],totalBooks:0,availableBooks:0,rentals:[],totalRentals:0,lastRented:"",totalUsers:0,totalPublishers:0}),async mounted(){try{await this.getBooks(),await this.getRentals(),await this.getUsers(),await this.getPublishers(),await this.getAvailableBooks(),await this.lastRent(),this.updateCardValues()}catch(e){console.error("Erro ao carregar dados:",e)}finally{this.loadingCard=!1}},components:{LineChart:H,PieChart:se},methods:{updateCardValues(){this.cards[0].value=this.lastRented,this.cards[1].value=this.totalRentals,this.cards[2].value=this.availableBooks,this.cards[3].value=this.totalBooks,this.cards[4].value=this.totalUsers,this.cards[5].value=this.totalPublishers},async getBooks(){try{const e=await oe.list();if(this.totalBooks=e.data.totalRegisters,this.totalBooks>0){const e=await oe.list({PageSize:this.totalBooks});this.books=e.data.data}}catch(e){console.error("Erro ao buscar livros: ",e)}},async getRentals(){try{const e=await W.list();if(this.totalRentals=e.data.totalRegisters,this.totalRentals>0){const e=await W.list({PageSize:this.totalRentals});this.rentals=e.data.data}}catch(e){console.error("Erro ao buscar aluguéis: ",e)}},async getUsers(){try{const e=await re.list();this.totalUsers=e.data.totalRegisters}catch(e){console.error("Erro ao buscar usuários:",e)}},async getPublishers(){try{const e=await ie.list();this.totalPublishers=e.data.totalRegisters}catch(e){console.error("Erro ao buscar editora: ",e)}},async getAvailableBooks(){this.availableBooks=await this.books.reduce((e,t)=>e+t.quantity,0)},async lastRent(){if(this.rentals.length>0){const e=await this.rentals.reduce((e,t)=>e.id<t.id?t:e);this.lastRented=e.book.name}else this.lastRented="Sem dados"}}},ne=le,ce=(0,B.A)(ne,q,L,!1,null,null,null),de=ce.exports,ue=a(4414),he=a(8511),me=a(9991),pe=a(174),ge=a(2756),fe=a(7112),ye=function(){var e=this,t=e._self._c;return t("div",[t(N.A,{staticClass:"pa-4",attrs:{fluid:""}},[t("TableTop",{attrs:{search:e.search,PageTitle:e.PageTitle},on:{updateSearch:e.updateSearch,"open-modal":e.openModalCreate}}),t(ge.A,{staticClass:"table",attrs:{wrap:""}},[t(he.A,{staticClass:"elevation-1",attrs:{dark:"",loading:e.loadingTable,"loading-text":"Carregando dados...",headers:e.headers,"header-props":e.headerprops,items:e.users,"server-items-length":e.totalItems,"items-per-page":e.pageSize,page:e.page,search:e.search,"no-results-text":e.noDataText,"no-data-text":e.noDataText,"footer-props":{"items-per-page-text":"Registros por página","items-per-page-options":[7,15,25,50,this.totalItems]},"mobile-breakpoint":"890","item-key":"id"},on:{"update:options":e.handleOptionsUpdate},scopedSlots:e._u([{key:"item.acoes",fn:function({item:a}){return[t("td",[t(d.A,{staticClass:"mr-2",on:{click:function(t){return e.openModalEdit(a)}}},[e._v(" mdi-pencil ")]),t(d.A,{staticClass:"mr-2",on:{click:function(t){return e.openModalDelete(a)}}},[e._v(" mdi-delete ")])],1)]}}],null,!0)})],1)],1),t(ge.A,{attrs:{justify:"center"}},[t(me.A,{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(pe.A,{ref:"",attrs:{form:""}},[t(R.A,{attrs:{dark:""}},[t(I.ri,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.ModalTitle))])]),t(I.OQ,[t(ue.A,[t(pe.A,{ref:"form",on:{submit:function(t){return t.preventDefault(),e.confirm.apply(null,arguments)}}},[t(ue.A,{attrs:{cols:"12"}},[t(fe.A,{attrs:{label:"Nome",counter:50,required:"",rules:e.stringRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(ue.A,{attrs:{cols:"12"}},[t(fe.A,{attrs:{counter:50,label:"Cidade",required:"",rules:e.stringRules},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}})],1),t(ue.A,{attrs:{cols:"12"}},[t(fe.A,{attrs:{counter:50,label:"Endereço",required:"",rules:e.stringRules},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),t(ue.A,{attrs:{cols:"12"}},[t(fe.A,{attrs:{counter:50,label:"Email",type:"email",required:"",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1)],1)],1),t(I.SL,[t(b.A),t(c.A,{attrs:{color:"red darken-1",text:""},on:{click:e.closeModal}},[e._v(" Cancelar ")]),t(c.A,{attrs:{color:"green darken-1",text:""},on:{click:e.confirm}},[e._v(" Salvar ")])],1)],1)],1)],1)],1),t("ModalDelete",{attrs:{dialogDelete:e.dialogDelete,EntityName:e.EntityName},on:{"close-modal-delete":e.closeModalDelete,"confirm-delete":e.confirmDelete}})],1)},be=[],ve=a(8465),De=a.n(ve),xe=a(198),ke=a(2367),Ae=function(){var e=this,t=e._self._c;return t(xe.A,{staticClass:"top sm-height-100"},[t(ge.A,{staticClass:"my-0 mx-0",attrs:{align:"center"}},[t(ke.sw,{staticClass:"title subheading text-h4 mr-15"},[e._v(e._s(e.PageTitle))]),t(c.A,{staticClass:"newBtn",attrs:{dark:""},on:{click:e.openModalCreate}},[e._v("Novo "),t(d.A,[e._v("mdi-plus")])],1)],1),t(b.A),t(fe.A,{attrs:{dense:"","hide-details":"",label:"Pesquisar",outlined:"","prepend-inner-icon":"mdi-magnify",filled:""},model:{value:e.localSearch,callback:function(t){e.localSearch=t},expression:"localSearch"}})],1)},je=[],Ce={props:{PageTitle:String,search:String},data(){return{localSearch:this.search}},watch:{localSearch(e){this.$emit("updateSearch",e)}},methods:{openModalCreate(){this.$emit("open-modal")}}},we=Ce,Pe=(0,B.A)(we,Ae,je,!1,null,null,null),Be=Pe.exports,_e=function(){var e=this,t=e._self._c;return t(me.A,{attrs:{persistent:"","max-width":"480"},model:{value:e.internalDialogDelete,callback:function(t){e.internalDialogDelete=t},expression:"internalDialogDelete"}},[t(R.A,{staticClass:"modalDelete",attrs:{dark:""}},[t(I.ri,{staticClass:"d-flex justify-center"},[t("span",{staticClass:"text-h5"},[e._v("Excluir "+e._s(e.EntityName))])]),t(I.OQ,{staticClass:"d-flex justify-center pb-3 pt-3"},[e._v(" Tem certeza que deseja excluir o item selecionado? ")]),t(I.SL,{staticClass:"d-flex justify-center"},[t(c.A,{attrs:{color:"red darken-1",text:""},on:{click:e.closeModalDelete}},[e._v(" Cancelar ")]),t(c.A,{attrs:{color:"green darken-1",text:""},on:{click:e.confirmDelete}},[e._v(" Confirmar ")])],1)],1)],1)},Oe=[],Me={props:{dialogDelete:Boolean,EntityName:String},data(){return{internalDialogDelete:this.dialogDelete}},watch:{dialogDelete(e){this.internalDialogDelete=e}},methods:{closeModalDelete(){this.$emit("close-modal-delete")},confirmDelete(){this.$emit("confirm-delete")}}},Se=Me,Ee=(0,B.A)(Se,_e,Oe,!1,null,null,null),Te=Ee.exports,ze={components:{TableTop:Be,ModalDelete:Te},data(){return{noDataText:"Nenhum registro encontrado",search:"",ModalTitle:"",PageTitle:"Usuários",EntityName:"Usuário",headers:[{text:"ID",value:"id"},{text:"Nome",value:"name"},{text:"Cidade",value:"city"},{text:"Endereço",value:"address"},{text:"Email",value:"email"},{text:"Ações",value:"acoes",sortable:!1}],headerprops:{sortByText:"Ordenar Por"},users:[],id:0,name:"",address:"",city:"",email:"",totalItems:0,pageSize:0,OrderByProperty:"Id",OrderByDesc:!1,page:1,dialog:!1,dialogDelete:!1,userId:null,emailExists:!1,loadingTable:!0,stringRules:[e=>!!e||"Preencha este campo",e=>e&&e.length>=3||"Mínimo 3 caracteres",e=>e&&e.length<=50||"Máximo 50 caracteres"],emailRules:[e=>!!e||"Preencha este campo",e=>e&&e.length>=3||"Mínimo 3 caracteres",e=>e&&e.length<=50||"Máximo 50 caracteres",e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"Informe um email válido"]}},mounted(){this.getUsers()},methods:{updateSearch(e){this.search=e,this.page=1,this.getUsers()},async getUsers(){try{const e=await re.list({PageNumber:this.page,PageSize:this.pageSize,OrderByProperty:this.OrderByProperty,OrderByDesc:this.OrderByDesc,FilterValue:this.search});this.users=e.data.data,this.totalItems=e.data.totalRegisters}catch(e){console.error("Erro ao buscar informações:",e),404==e.response.status&&(this.users=[])}finally{this.loadingTable=!1}},handleOptionsUpdate(e){const t={id:"Id",name:"Name",city:"City",address:"Address",email:"Email"};e.sortBy[0]||e.sortDesc[0]?(this.OrderByProperty=t[e.sortBy[0]],this.OrderByDesc=e.sortDesc[0]):(this.OrderByProperty="Id",this.OrderByDesc=!1),this.pageSize=e.itemsPerPage,this.page=e.page,this.getUsers()},openModalCreate(){this.ModalTitle="Adicionar Usuário",this.dialog=!0,this.$refs.form.resetValidation(),this.name="",this.address="",this.city="",this.email=""},openModalEdit(e){this.ModalTitle="Editar Usuário",this.dialog=!0,this.userId=e.id,this.name=e.name,this.address=e.address,this.city=e.city,this.email=e.email,this.$refs.form.resetValidation()},closeModal(){this.dialog=!1},async confirm(){if(this.$refs.form&&"function"===typeof this.$refs.form.validate){const e=await this.$refs.form.validate();if(!e)return;if("Adicionar Usuário"===this.ModalTitle){const e={name:this.name,address:this.address,city:this.city,email:this.email};re.create(e).then(()=>{De().fire({icon:"success",title:"Usuário adicionado com êxito!",showConfirmButton:!1,timer:3500}),this.getUsers(),this.closeModal()}).catch(e=>{console.error("Erro ao adicionar o usuario:",e),De().fire({icon:"error",title:"Erro ao adicionar usuário.",text:e.response.data.message,showConfirmButton:!1,timer:3500})})}else{const e={id:this.userId,name:this.name,address:this.address,city:this.city,email:this.email};re.update(e).then(()=>{De().fire({icon:"success",title:"Usuário atualizado com êxito!",showConfirmButton:!1,timer:3500}),this.getUsers(),this.closeModal()}).catch(e=>{console.error("Erro ao atualizar usuário:",e),De().fire({icon:"success",title:"Erro ao atualizar usuário.",text:e.response.data.message,showConfirmButton:!1,timer:3500}),this.closeModal()})}}},openModalDelete(e){this.userId=e.id,this.dialogDelete=!0},closeModalDelete(){this.dialogDelete=!1},confirmDelete(){const e={id:this.userId};re.delete(e).then(()=>{De().fire({icon:"success",title:"Usuário deletado com êxito!",showConfirmButton:!1,timer:3500}),this.getUsers(),this.closeModalDelete(),this.page=1}).catch(e=>{console.error("Erro ao deletar a usuário:",e),De().fire({icon:"error",title:"Erro ao deletar usuário.",text:e.response.data.message,showConfirmButton:!1,timer:3500}),this.closeModalDelete()})}}},Re=ze,Ie=(0,B.A)(Re,ye,be,!1,null,null,null),Ne=Ie.exports,$e=a(20),qe=function(){var e=this,t=e._self._c;return t("div",[t(N.A,{staticClass:"pa-4",attrs:{fluid:""}},[t("TableTop",{attrs:{search:e.search,PageTitle:e.PageTitle},on:{updateSearch:e.updateSearch,"open-modal":e.openModalCreate}}),t(ge.A,{staticClass:"table",attrs:{wrap:""}},[t(he.A,{staticClass:"elevation-1",attrs:{loading:e.loadingTable,"loading-text":"Carregando dados...",headers:e.headers,"header-props":e.headerprops,items:e.books,"server-items-length":e.totalItems,"items-per-page":e.pageSize,page:e.page,search:e.search,"no-results-text":e.noDataText,"no-data-text":e.noDataText,"footer-props":{"items-per-page-text":"Registros por página","items-per-page-options":[7,15,25,50,this.totalItems]},"mobile-breakpoint":"890",dark:"","item-key":"id"},on:{"update:options":e.handleOptionsUpdate},scopedSlots:e._u([{key:"item.acoes",fn:function({item:a}){return[t("td",[t(d.A,{staticClass:"mr-2",on:{click:function(t){return e.openModalEdit(a)}}},[e._v(" mdi-pencil ")]),t(d.A,{staticClass:"mr-2",on:{click:function(t){return e.openModalDelete(a)}}},[e._v(" mdi-delete ")])],1)]}}],null,!0)})],1)],1),t(ge.A,{attrs:{justify:"center"}},[t(me.A,{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(R.A,{attrs:{dark:""}},[t(I.ri,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.ModalTitle))])]),t(I.OQ,[t(ue.A,[t(pe.A,{ref:"form",on:{sumbit:function(t){return t.preventDefault(),e.confirm.apply(null,arguments)}}},[t(ue.A,{attrs:{cols:"12"}},[t(fe.A,{attrs:{counter:50,label:"Nome",required:"",rules:e.stringRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(ue.A,{attrs:{cols:"12"}},[t(fe.A,{attrs:{counter:50,label:"Autor",required:"",rules:e.stringRules},model:{value:e.author,callback:function(t){e.author=t},expression:"author"}})],1),t(ue.A,{attrs:{cols:"12"}},[t($e.A,{attrs:{items:e.publishers,"item-value":"id","item-text":"name",label:"Editora",required:"",rules:e.publisherRules},model:{value:e.publisher,callback:function(t){e.publisher=t},expression:"publisher"}})],1),t(ue.A,{attrs:{cols:"12"}},[t(fe.A,{attrs:{counter:4,step:1,label:"Lançamento",required:"",type:"number",rules:e.releaseRules},model:{value:e.release,callback:function(t){e.release=t},expression:"release"}})],1),t(ue.A,{attrs:{cols:"12"}},[t(fe.A,{attrs:{counter:4,step:1,label:"Estoque",required:"",type:"number",rules:e.quantityRules},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}})],1)],1)],1)],1),t(I.SL,[t(b.A),t(c.A,{attrs:{color:"red darken-1",text:""},on:{click:e.closeModal}},[e._v(" Cancelar ")]),t(c.A,{attrs:{color:"green darken-1",text:""},on:{click:e.confirm}},[e._v(" Salvar ")])],1)],1)],1)],1),t("ModalDelete",{attrs:{dialogDelete:e.dialogDelete,EntityName:e.EntityName},on:{"close-modal-delete":e.closeModalDelete,"confirm-delete":e.confirmDelete}})],1)},Le=[],Ue={components:{TableTop:Be,ModalDelete:Te},data(){return{noDataText:"Nenhum registro encontrado",search:"",ModalTitle:"",PageTitle:"Livros",EntityName:"Livro",headers:[{text:"ID",value:"id"},{text:"Nome",value:"name"},{text:"Autor",value:"author"},{text:"Editora",value:"publisher.name"},{text:"Lançamento",value:"release"},{text:"Estoque",value:"quantity"},{text:"Alugados",value:"rented"},{text:"Ações",value:"acoes",sortable:!1}],headerprops:{sortByText:"Ordenar Por"},books:[],publishers:[],id:0,name:"",author:"",publisher:null,release:null,quantity:null,rented:0,totalItems:0,pageSize:0,OrderByProperty:"Id",OrderByDesc:!1,page:1,dialog:!1,dialogDelete:!1,bookId:null,nameExists:!1,loadingTable:!0,stringRules:[e=>!!e||"Preencha este campo",e=>e&&e.length>=3||"Mínimo 3 caracteres",e=>e&&e.length<=50||"Máximo 50 caracteres"],publisherRules:[e=>!!e||"Preencha este campo"],releaseRules:[e=>!!e||"Preencha este campo",e=>/^\d{4}$/.test(e)||"Informe um ano válido (YYYY)",e=>e&&e<=(new Date).getFullYear()||`Não é possível ser posterior a ${(new Date).getFullYear()}`],quantityRules:[e=>!!e||"Preencha este campo",e=>null!=this.bookId||(e>=0||"Quantidade deve ser maior que 0")]}},mounted(){this.getBooks(),this.getPublishers()},methods:{updateSearch(e){this.search=e,this.page=1,this.getBooks()},async getBooks(){try{const e=await oe.list({PageNumber:this.page,PageSize:this.pageSize,OrderByProperty:this.OrderByProperty,OrderByDesc:this.OrderByDesc,FilterValue:this.search});this.books=e.data.data,this.totalItems=e.data.totalRegisters}catch(e){console.error("Erro ao buscar informações:",e),404==e.response.status&&(this.books=[])}finally{this.loadingTable=!1}},async getPublishers(){try{const e=await ie.listSelect();this.publishers=e.data.data}catch(e){console.error("Erro ao buscar editoras:",e)}},handleOptionsUpdate(e){const t={id:"Id",name:"Name",author:"Author","publisher.name":"Publisher.Name",release:"Release",quantity:"Quantity",rented:"Rented"};e.sortBy[0]||e.sortDesc[0]?(this.OrderByProperty=t[e.sortBy[0]],this.OrderByDesc=e.sortDesc[0]):(this.OrderByProperty="Id",this.OrderByDesc=!1),this.pageSize=e.itemsPerPage,this.page=e.page,this.getBooks()},openModalCreate(){this.ModalTitle="Adicionar Livro",this.dialog=!0,this.$refs.form.resetValidation(),this.name="",this.author="",this.publisher=null,this.release="",this.quantity=""},openModalEdit(e){this.ModalTitle="Editar livro",this.dialog=!0,this.bookId=e.id,this.name=e.name,this.author=e.author,this.publisher=e.publisherId,this.release=e.release,this.quantity=e.quantity.toString(),this.rented=e.rented,this.$refs.form.resetValidation()},closeModal(){this.dialog=!1},async confirm(){if(this.$refs.form&&"function"===typeof this.$refs.form.validate){const e=await this.$refs.form.validate();if(!e)return;if("Adicionar Livro"===this.ModalTitle){const e={name:this.name,author:this.author,publisherId:this.publisher,release:this.release,quantity:this.quantity};oe.create(e).then(()=>{De().fire({icon:"success",title:"Livro adicionado com êxito!",showConfirmButton:!1,timer:3500}),this.closeModal(),this.getBooks(),this.getPublishers()}).catch(e=>{console.error("Erro ao adicionar o livro:",e),De().fire({icon:"error",title:"Erro ao adicionar o livro.",text:e.response.data.message,showConfirmButton:!1,timer:3500})})}else{const e={id:this.bookId,name:this.name,author:this.author,publisherId:this.publisher,release:this.release,quantity:this.quantity,rented:this.rented};oe.update(e).then(()=>{De().fire({icon:"success",title:"Livro atualizado com êxito!",showConfirmButton:!1,timer:3500}),this.closeModal(),this.getBooks(),this.getPublishers()}).catch(e=>{console.error("Erro ao atualizar livro:",e),De().fire({icon:"error",title:"Erro ao atualizar o livro.",text:e.response.data.message,showConfirmButton:!1,timer:3500})})}}},openModalDelete(e){this.bookId=e.id,this.dialogDelete=!0},closeModalDelete(){this.dialogDelete=!1},confirmDelete(){const e={id:this.bookId};oe.delete(e).then(()=>{De().fire({icon:"success",title:"Livro deletado com êxito!",showConfirmButton:!1,timer:3500}),this.closeModalDelete(),this.getBooks(),this.getPublishers(),this.page=1}).catch(e=>{console.error("Erro ao deletar o livro:",e),De().fire({icon:"error",title:"Erro ao deletar o livro.",text:e.response.data.message,showConfirmButton:!1,timer:3500}),this.closeModalDelete()})}}},Ve=Ue,Fe=(0,B.A)(Ve,qe,Le,!1,null,null,null),Qe=Fe.exports,Ye=function(){var e=this,t=e._self._c;return t("div",[t(N.A,{staticClass:"pa-4",attrs:{fluid:""}},[t("TableTop",{attrs:{search:e.search,PageTitle:e.PageTitle},on:{updateSearch:e.updateSearch,"open-modal":e.openModalCreate}}),t(ge.A,{staticClass:"table",attrs:{wrap:""}},[t(he.A,{staticClass:"elevation-1",attrs:{dark:"",loading:e.loadingTable,"loading-text":"Carregando dados...",headers:e.headers,"header-props":e.headerprops,items:e.publishers,"server-items-length":e.totalItems,"items-per-page":e.pageSize,page:e.page,search:e.search,"no-results-text":e.noDataText,"no-data-text":e.noDataText,"footer-props":{"items-per-page-text":"Registros por página","items-per-page-options":[7,15,25,50,this.totalItems]},"mobile-breakpoint":"890","item-key":"id"},on:{"update:options":e.handleOptionsUpdate},scopedSlots:e._u([{key:"item.acoes",fn:function({item:a}){return[t("td",[t(d.A,{staticClass:"mr-2",on:{click:function(t){return e.openModalEdit(a)}}},[e._v(" mdi-pencil ")]),t(d.A,{staticClass:"mr-2",on:{click:function(t){return e.openModalDelete(a)}}},[e._v(" mdi-delete ")])],1)]}}],null,!0)})],1)],1),t(ge.A,{attrs:{justify:"center"}},[t(me.A,{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(pe.A,{ref:"",attrs:{form:""}},[t(R.A,{attrs:{dark:""}},[t(I.ri,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.ModalTitle))])]),t(I.OQ,[t(ue.A,[t(pe.A,{ref:"form",on:{submit:function(t){return t.preventDefault(),e.confirm.apply(null,arguments)}}},[t(ue.A,{attrs:{cols:"12"}},[t(fe.A,{attrs:{counter:50,label:"Nome",required:"",rules:e.stringRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t(ue.A,{attrs:{cols:"12"}},[t(fe.A,{attrs:{counter:50,label:"Cidade",required:"",rules:e.stringRules},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}})],1)],1)],1),t(I.SL,[t(b.A),t(c.A,{attrs:{color:"red darken-1",text:""},on:{click:e.closeModal}},[e._v(" Cancelar ")]),t(c.A,{attrs:{color:"green darken-1",text:""},on:{click:e.confirm}},[e._v(" Salvar ")])],1)],1)],1)],1)],1)],1),t("ModalDelete",{attrs:{dialogDelete:e.dialogDelete,EntityName:e.EntityName},on:{"close-modal-delete":e.closeModalDelete,"confirm-delete":e.confirmDelete}})],1)},We=[],Ke={components:{TableTop:Be,ModalDelete:Te},data(){return{noDataText:"Nenhum registro encontrado",search:"",ModalTitle:"",PageTitle:"Editoras",EntityName:"Editora",headers:[{text:"ID",value:"id"},{text:"Nome",value:"name"},{text:"Cidade",value:"city"},{text:"Ações",value:"acoes",sortable:!1}],headerprops:{sortByText:"Ordenar Por"},publishers:[],id:0,name:"",city:"",totalItems:0,pageSize:0,OrderByProperty:"Id",OrderByDesc:!1,page:1,dialog:!1,dialogDelete:!1,publisherId:null,nameExists:!1,loadingTable:!0,stringRules:[e=>!!e||"Preencha este campo",e=>e&&e.length>=3||"Mínimo 3 caracteres",e=>e&&e.length<=50||"Máximo 50 caracteres"]}},mounted(){this.getPublishers()},methods:{updateSearch(e){this.search=e,this.page=1,this.getPublishers()},async getPublishers(){try{const e=await ie.list({PageNumber:this.page,PageSize:this.pageSize,OrderByProperty:this.OrderByProperty,OrderByDesc:this.OrderByDesc,FilterValue:this.search});this.publishers=e.data.data,this.totalItems=e.data.totalRegisters}catch(e){console.error("Erro ao buscar informações:",e),404==e.response.status&&(this.publishers=[])}finally{this.loadingTable=!1}},handleOptionsUpdate(e){const t={id:"Id",name:"Name",city:"City"};e.sortBy[0]||e.sortDesc[0]?(this.OrderByProperty=t[e.sortBy[0]],this.OrderByDesc=e.sortDesc[0]):(this.OrderByProperty="Id",this.OrderByDesc=!1),this.pageSize=e.itemsPerPage,this.page=e.page,this.getPublishers()},openModalCreate(){this.ModalTitle="Adicionar Editora",this.dialog=!0,this.$refs.form.resetValidation(),this.name="",this.city=""},openModalEdit(e){this.ModalTitle="Editar Editora",this.dialog=!0,this.publisherId=e.id,this.name=e.name,this.city=e.city,this.$refs.form.resetValidation()},closeModal(){this.dialog=!1},async confirm(){if(this.$refs.form&&"function"===typeof this.$refs.form.validate){const e=await this.$refs.form.validate();if(!e)return;if("Adicionar Editora"===this.ModalTitle){const e={name:this.name,city:this.city};ie.create(e).then(()=>{De().fire({icon:"success",title:"Editora adicionada com êxito!",showConfirmButton:!1,timer:3500}),this.closeModal(),this.getPublishers()}).catch(e=>{console.error("Erro ao adicionar editora:",e),De().fire({icon:"error",title:"Erro ao adicionar editora.",text:e.response.data.message,showConfirmButton:!1,timer:3500})})}else{const e={id:this.publisherId,name:this.name,city:this.city};ie.update(e).then(()=>{De().fire({icon:"success",title:"Editora atualizada com êxito!",showConfirmButton:!1,timer:3500}),this.closeModal(),this.getPublishers()}).catch(e=>{console.error("Erro ao atualizar editora:",e),De().fire({icon:"error",title:"Erro ao atualizar editora.",text:e.response.data.message,showConfirmButton:!1,timer:3500})})}}},openModalDelete(e){this.publisherId=e.id,this.dialogDelete=!0},closeModalDelete(){this.dialogDelete=!1},confirmDelete(){const e={id:this.publisherId};ie.delete(e).then(()=>{De().fire({icon:"success",title:"Editora deletada com êxito!",showConfirmButton:!1,timer:3500}),this.getPublishers(),this.page=1}).catch(e=>{console.error("Erro ao deletar a editora:",e),De().fire({icon:"error",title:"Erro ao deletar editora.",text:e.response.data.message,showConfirmButton:!1,timer:3500}),this.closeModalDelete()}),this.dialogDelete=!1}}},Ze=Ke,Ge=(0,B.A)(Ze,Ye,We,!1,null,null,null),He=Ge.exports,Je=a(3180),Xe=function(){var e=this,t=e._self._c;return t("div",[t(N.A,{staticClass:"pa-4",attrs:{fluid:""}},[t("TableTop",{attrs:{search:e.search,PageTitle:e.PageTitle},on:{updateSearch:e.updateSearch,"open-modal":e.openModalCreate}}),t(u.A,{staticClass:"table",attrs:{row:"",wrap:""}},[t(he.A,{staticClass:"elevation-1",attrs:{dark:"",loading:e.loadingTable,"loading-text":"Carregando dados...",headers:e.headers,"header-props":e.headerprops,items:e.rentals,"server-items-length":e.totalItems,"items-per-page":e.pageSize,"no-results-text":e.noDataText,"no-data-text":e.noDataText,"footer-props":{"items-per-page-text":"Registros por página","items-per-page-options":[7,15,25,50,this.totalItems]},"mobile-breakpoint":"890"},on:{"update:options":e.handleOptionsUpdate},scopedSlots:e._u([{key:"item.status",fn:function({item:a}){return[t("td",[t(Je.A,{staticClass:"black--text",class:e.statusClass(a)},[e._v(" "+e._s(a.status)+" ")])],1)]}},{key:"item.acoes",fn:function({item:a}){return[t("td",["Pendente"==a.status?t(d.A,{staticClass:"mr-2",on:{click:function(t){return e.openModalDevol(a)}}},[e._v(" mdi-book ")]):e._e(),"Pendente"==a.status?t(d.A,{on:{click:function(t){return e.openModalDelete(a)}}},[e._v(" mdi-delete ")]):e._e()],1)]}}],null,!0)})],1)],1),t(ge.A,{attrs:{justify:"center"}},[t(me.A,{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(R.A,{attrs:{dark:""}},[t(I.ri,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.ModalTitle))])]),t(I.OQ,[t(ue.A,[t(pe.A,{ref:"form",on:{submit:function(t){return t.preventDefault(),e.confirm.apply(null,arguments)}}},[t(ue.A,{attrs:{cols:"12"}},[t($e.A,{attrs:{items:e.books,"item-value":"id","item-text":"name",label:"Livro",required:"",rules:e.Rules},model:{value:e.book,callback:function(t){e.book=t},expression:"book"}})],1),t(ue.A,{attrs:{cols:"12"}},[t($e.A,{attrs:{items:e.users,"item-value":"id","item-text":"name",label:"Usuário",rules:e.Rules,required:""},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}})],1),t(ue.A,{attrs:{cols:"12"}},[t(fe.A,{attrs:{disabled:"",label:"Data do Aluguel (Hoje)",required:"",type:"date"},model:{value:e.rentalDate,callback:function(t){e.rentalDate=t},expression:"rentalDate"}})],1),t(ue.A,{attrs:{cols:"12"}},[t(fe.A,{attrs:{rules:e.Rules,label:"Previsão de Devolução",required:"",type:"date",min:e.rentalDate,max:e.MaxDate()},model:{value:e.forecastDate,callback:function(t){e.forecastDate=t},expression:"forecastDate"}})],1)],1)],1)],1),t(I.SL,[t(b.A),t(c.A,{attrs:{color:"red darken-1",text:""},on:{click:e.closeModal}},[e._v(" Cancelar ")]),t(c.A,{attrs:{color:"green darken-1",text:""},on:{click:e.confirm}},[e._v(" Salvar ")])],1)],1)],1)],1),t("ModalDelete",{attrs:{dialogDelete:e.dialogDelete,EntityName:e.EntityName},on:{"close-modal-delete":e.closeModalDelete,"confirm-delete":e.confirmDelete}}),t("ModalDevol",{attrs:{dialogDevol:e.dialogDevol},on:{"close-modal-devol":e.closeModalDevol,"confirm-devol":e.confirmDevol}})],1)},et=[],tt=function(){var e=this,t=e._self._c;return t(me.A,{attrs:{persistent:"","max-width":"480"},model:{value:e.internalDialogDevol,callback:function(t){e.internalDialogDevol=t},expression:"internalDialogDevol"}},[t(R.A,{staticClass:"modalDelete",attrs:{dark:""}},[t(I.ri,{staticClass:"d-flex justify-center"},[t("span",{staticClass:"text-h5"},[e._v("Devolver Livro")])]),t(I.OQ,{staticClass:"d-flex justify-center pb-3 pt-3"},[e._v(" Tem certeza que deseja realizar a devolução do livro selecionado? ")]),t(I.SL,{staticClass:"d-flex justify-center"},[t(c.A,{attrs:{color:"red darken-1",text:""},on:{click:e.closeModalDevol}},[e._v(" Cancelar ")]),t(c.A,{attrs:{color:"green darken-1",text:""},on:{click:e.confirmDevol}},[e._v(" Confirmar ")])],1)],1)],1)},at=[],st={props:{dialogDevol:Boolean},data(){return{internalDialogDevol:this.dialogDevol}},watch:{dialogDevol(e){this.internalDialogDevol=e}},methods:{closeModalDevol(){this.$emit("close-modal-devol")},confirmDevol(){this.$emit("confirm-devol")}}},rt=st,ot=(0,B.A)(rt,tt,at,!1,null,null,null),it=ot.exports,lt={components:{TableTop:Be,ModalDelete:Te,ModalDevol:it},data(){return{noDataText:"Nenhum registro encontrado",search:"",ModalTitle:"",PageTitle:"Aluguéis",EntityName:"Aluguel",headers:[{text:"ID",value:"id"},{text:"Livro",align:"start",value:"book.name"},{text:"Usuário",value:"user.name"},{text:"Data do Aluguel",value:"rentalDate"},{text:"Previsão de Devolução",value:"forecastDate"},{text:"Data de Devolução",value:"returnDate"},{text:"Status",value:"status"},{text:"Ações",value:"acoes",sortable:!1}],headerprops:{sortByText:"Ordenar Por"},rentals:[],books:[],users:[],id:0,book:null,user:null,rentalDate:"",forecastDate:"",returnDate:"",status:"",totalItems:0,pageSize:0,OrderByProperty:"Id",OrderByDesc:!1,page:1,dialog:!1,dialogDelete:!1,dialogDevol:!1,rentalId:null,loadingTable:!0,Rules:[e=>!!e||"Preencha este campo"]}},mounted(){this.getRentals(),this.getBooks(),this.getUsers()},methods:{updateSearch(e){const t=/^(\d{1,2})\/?(\d{1,2})?\/?(\d{0,4})?$/;this.page=1,t.test(e)||e.match(/^\d{1,2}\/$/)?this.search=this.parseDate(e):this.search=e,this.getRentals()},MaxDate(){const e=new Date,t=new Date(e);return t.setDate(e.getDate()+30),t.toISOString().substr(0,10)},statusClass(e){return"Atrasado"==e.status?"red":"No prazo"==e.status?"green":"yellow"},formatDate(e){const t=new Date(e),a=new Date(t.getTime()+6e4*t.getTimezoneOffset()),s={year:"numeric",month:"2-digit",day:"2-digit",timeZone:"UTC"};return a.toLocaleDateString("pt-BR",s)},parseDate(e){const t=e.split("/");let a="";if(t.length>=1){const e=t[0];a=`${e}`}if(t.length>=2){const e=t[1];2===e.length&&(a=`${e}-${a}`)}if(t.length>=3){const e=t[2];4===e.length&&(a=`${e}-${a}`)}return a},getCurrentDate(){const e=-180,t=new Date,a=new Date(t.getTime()+60*e*1e3);return a.toISOString().substr(0,10)},async getRentals(){try{const e=await W.list({PageNumber:this.page,PageSize:this.pageSize,OrderByProperty:this.OrderByProperty,OrderByDesc:this.OrderByDesc,FilterValue:this.search});this.rentals=e.data.data,this.totalItems=e.data.totalRegisters,this.rentals.forEach(e=>{e.forecastDate=this.formatDate(e.forecastDate),e.rentalDate=this.formatDate(e.rentalDate),e.returnDate=e.returnDate=e.returnDate?this.formatDate(e.returnDate):null})}catch(e){console.error("Erro ao buscar informações:",e),404==e.response.status&&(this.rentals=[])}finally{this.loadingTable=!1}},async getBooks(){try{const e=await oe.listSelect();this.books=e.data.data}catch(e){console.error("Erro ao buscar informações:",e)}},async getUsers(){try{const e=await re.listSelect();this.users=e.data.data}catch(e){console.error("Erro ao buscar informações:",e)}},handleOptionsUpdate(e){const t={id:"Id","book.name":"Book.Name","user.name":"User.Name",rentalDate:"RentalDate",forecastDate:"ForecastDate",returnDate:"ReturnDate",status:"Status"};e.sortBy[0]||e.sortDesc[0]?(this.OrderByProperty=t[e.sortBy[0]],this.OrderByDesc=e.sortDesc[0]):(this.OrderByProperty="Id",this.OrderByDesc=!1),this.pageSize=e.itemsPerPage,this.page=e.page,this.getRentals()},openModalCreate(){this.ModalTitle="Adicionar Aluguel",this.dialog=!0,this.book=null,this.user=null,this.rentalDate=this.getCurrentDate(),this.forecastDate="",this.returnDate="",this.$refs.form.resetValidation()},closeModal(){this.dialog=!1},async confirm(){if(this.$refs.form&&"function"===typeof this.$refs.form.validate){const e=await this.$refs.form.validate();if(!e)return;if("Adicionar Aluguel"===this.ModalTitle){const e={bookId:this.book,userId:this.user,rentalDate:this.rentalDate,forecastDate:this.forecastDate};console.log(e),W.create(e).then(()=>{De().fire({icon:"success",title:"Aluguel adicionado com êxito!",showConfirmButton:!1,timer:3500}),this.closeModal(),this.getRentals(),this.getBooks()}).catch(e=>{console.error("Erro ao adicionar o aluguel:",e),De().fire({icon:"error",title:"Erro ao adicionar o aluguel: ",text:e.response.data.message,showConfirmButton:!1,timer:3500})})}}},openModalDelete(e){this.update={...e},this.dialogDelete=!0},closeModalDelete(){this.dialogDelete=!1},confirmDelete(){const e=this.update;W.delete(e).then(()=>{De().fire({icon:"success",title:"Aluguel deletado com êxito!",showConfirmButton:!1,timer:3500}),this.getRentals(),this.getBooks(),this.closeModalDelete(),this.page=1}).catch(e=>{console.error("Erro ao deletar aluguel:",e),De().fire({icon:"error",title:"Erro ao deletar aluguel!",text:e.response.data.message,showConfirmButton:!1,timer:3500}),this.closeModalDelete()})},openModalDevol(e){this.dialogDevol=!0,this.update={...e}},confirmDevol(){const e={id:this.update.id,returnDate:new Intl.DateTimeFormat("sv-SE").format(new Date)};W.update(e).then(e=>{200==e.status&&(De().fire({icon:"success",title:"Devolução realizada com êxito!",showConfirmButton:!1,timer:3500}),this.closeModalDevol(),this.getRentals(),this.getBooks())}).catch(e=>{console.error("Erro ao devolver aluguel:",e),De().fire({icon:"error",title:"Erro ao realizar devolução!",text:e.response.data.message,showConfirmButton:!1,timer:3500})})},closeModalDevol(){this.dialogDevol=!1}}},nt=lt,ct=(0,B.A)(nt,Xe,et,!1,null,null,null),dt=ct.exports,ut=function(){var e=this,t=e._self._c;return t(N.A,{staticClass:"login-container",attrs:{fluid:""}},[t(me.A,{attrs:{persistent:"","max-width":"400"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(R.A,{attrs:{dark:""}},[t(I.ri,{staticClass:"text-center"},[e._v(" Login ")]),t(I.OQ,[t(pe.A,[t(fe.A,{attrs:{label:"Email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(fe.A,{attrs:{label:"Password",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),t(I.SL,{staticClass:"justify-center flex-column"},[t(c.A,{attrs:{color:"primary"},on:{click:e.login}},[e._v("Login")]),t("router-link",{staticClass:"mt-3 text-decoration-none",attrs:{to:"/registro"}},[t("span",{staticClass:"login-link"},[e._v("Registrar")])])],1)],1)],1)],1)},ht=[],mt=(a(8743),{data(){return{dialog:!0,email:"",password:""}},methods:{async login(){j.login({email:this.email,password:this.password}).then(()=>{De().fire({icon:"success",title:"Usuário logado com êxito!",showConfirmButton:!1,timer:3500}),this.$router.push({name:"home"})}).catch(e=>{console.error("Erro ao logar:",e),De().fire({icon:"error",title:"Erro ao logar.",text:e.response.data.message,showConfirmButton:!1,timer:3500})})}}}),pt=mt,gt=(0,B.A)(pt,ut,ht,!1,null,null,null),ft=gt.exports,yt=function(){var e=this,t=e._self._c;return t(N.A,{staticClass:"login-container",attrs:{fluid:""}},[t(me.A,{attrs:{persistent:"","max-width":"400"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(R.A,{attrs:{dark:""}},[t(I.ri,{staticClass:"text-center"},[e._v(" Registro ")]),t(I.OQ,[t(pe.A,[t(fe.A,{attrs:{label:"Name",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t(fe.A,{attrs:{label:"Email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(fe.A,{attrs:{label:"Password",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),t(I.SL,{staticClass:"justify-center flex-column"},[t(c.A,{attrs:{color:"primary"},on:{click:e.register}},[e._v("Registrar")]),t("router-link",{staticClass:"mt-3 text-decoration-none",attrs:{to:"/"}},[t("span",{staticClass:"login-link"},[e._v("Login")])])],1)],1)],1)],1)},bt=[],vt={data(){return{dialog:!0,name:"",email:"",password:""}},methods:{register(){j.register({name:this.name,email:this.email,password:this.password}).then(()=>{De().fire({icon:"success",title:"Usuário registrado com êxito!",showConfirmButton:!1,timer:3500}),this.$router.push({name:"login"})}).catch(e=>{console.error("Erro ao registrar:",e),De().fire({icon:"error",title:"Erro ao registrar.",text:e.response.data.message,showConfirmButton:!1,timer:3500})})}}},Dt=vt,xt=(0,B.A)(Dt,yt,bt,!1,null,null,null),kt=xt.exports;s.Ay.use(z.Ay);const At=[{path:"/",name:"login",component:ft},{path:"/registro",name:"register",component:kt},{path:"/home",name:"home",component:de},{path:"/usuario",name:"user",component:Ne},{path:"/livro",name:"book",component:Qe},{path:"/editora",name:"edit",component:He},{path:"/aluguel",name:"alug",component:dt},{path:"*",redirect:"/home"}],jt=new z.Ay({mode:"history",base:"/",routes:At});jt.beforeEach((e,t,a)=>{const s=["/","/registro"];if(j.isAuthenticated()&&s.includes(e.path))return a("/home");const r=!s.includes(e.path);if(r&&!j.isAuthenticated())return a("/");a()});var Ct=jt,wt=a(3971);s.Ay.use(wt.A);var Pt=new wt.A({}),Bt=a(1380);s.Ay.config.productionTip=!0,s.Ay.use(Bt.Ay),s.Ay.prototype.$swal=De(),new s.Ay({router:Ct,vuetify:Pt,render:e=>e(T)}).$mount("#app")}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,o){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],o=e[d][2];for(var l=!0,n=0;n<s.length;n++)(!1&o||i>=o)&&Object.keys(a.O).every(function(e){return a.O[e](s[n])})?s.splice(n--,1):(l=!1,o<i&&(i=o));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,o,i=s[0],l=s[1],n=s[2],c=0;if(i.some(function(t){return 0!==e[t]})){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(n)var d=n(a)}for(t&&t(s);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},s=self["webpackChunklocadora4"]=self["webpackChunklocadora4"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],function(){return a(9225)});s=a.O(s)})();